<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Sun Feb 01 22:50:27 PST 2015 -->
<title>ConcurrentHashMap.MapConfig</title>
<meta name="date" content="2015-02-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConcurrentHashMap.MapConfig";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentHashMap.MapConfig.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.LoadFactorSpec.html" title="interface in org.logicmill.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfigBuilder.html" title="interface in org.logicmill.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html" target="_top">Frames</a></li>
<li><a href="ConcurrentHashMap.MapConfig.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.logicmill.util.concurrent</div>
<h2 title="Class ConcurrentHashMap.MapConfig" class="title">Class ConcurrentHashMap.MapConfig</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.logicmill.util.concurrent.ConcurrentHashMap.MapConfig</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.html" title="class in org.logicmill.util.concurrent">ConcurrentHashMap</a>&lt;<a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.html" title="type parameter in ConcurrentHashMap">K</a>,<a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.html" title="type parameter in ConcurrentHashMap">V</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public static class <span class="strong">ConcurrentHashMap.MapConfig</span>
extends java.lang.Object</pre>
<div class="block">A utility that simplifies configuration of a ConcurrentHashMap,
 and guarantees that the resulting configuration conforms
 to the necessary constraints.<p>
 MapConfig uses <i>Fluent</i> style -- cascading method invocations to set individual configuration parameters. The
 interfaces defined within the map configuration utility are not strictly endofunctors; the types and methods
 are defined to enforce a partial ordering of invocations.
 A ConcurrentHashMap requires three configuration values -- segment size, initial segment count, and load factor.
 Invocations in a chain that determine those values appear in that order, although any step may be omitted 
 so that a default value is applied. A chain of method invocations begins with <code>#MapConfig.create()</code>, 
 and ends with <code>build()</code>.
 <ul>
 <li>
 The methods <code>withSegmentSize(int)</code> and <code>withExpectedSize(int)</code> determine segment size. At most one may be
 invoked in a chain, and must be the first invocation if present. If neither is present, the default segment size is used.
 </li>
 <li>
 The methods <code>withInitSegmentCount(int)</code> and <code>withInitCapacity(int)</code> determine the number of 
 initial segments.
 At most one may be invoked in a chain, and must be invoked before <code>withLoadFactor(float)</code> and after any method 
 that determines segment size. If neither is present, the default initial segment count is used.
 </li>
 <li>
 The method <code>withLoadFactor(float)</code> sets the load factor (duh), and must be the last method in a chain
 (before <code>build()</code>, if present. If absent, the default load factor is used.
 </ul>
 The structure of the interfaces enforces the order and exclusion of invocations.
 <p>Examples:
 <code><pre>
 ConcurrentHashMap(MapConfig.create()
                .withExpectedSize(4000000)
                .withInitCapacity(10000)
                .withLoadFactor(0.75f)
                .build());</pre></code>
 The term <i>expected size</i> (as in <code>withExectedSize()</code>) means the nominal size of the map in the application context. 
 The resulting segment size will ensure a reasonable balance of segment and directory size at the specified map size.
 The method <code>withInitialCapacity()</code> sets the number of initial segments so that the 
 total map capacity at creation approximates the specified value, based on the segment size previously 
 determined. In this case, segment size is set to 2048, and initial segment count is 4.
 <code><pre>
 
 ConcurrentHashMap(MapConfig.create()
                .withSegmentSize(5000)
                .withInitSegmentCount(100)
                .build()); </pre></code>
 In this example, segment size and initial segment count are specified more directly. The segment size is adjusted
 to the next largest power of 2 (8192), as is the segment count (128).
 <code><pre>
 
 ConcurrentHashMap(MapConfig.create()
                .withInitCapacity(100000)
                .build());</pre></code>
 When no information is supplied that would determine segment size, the default size 1024 is used. The resulting
 segment count is 128 (100000 / 1024, forced to the next largest power of 2).
 <code><pre>
 
 ConcurrentHashMap(MapConfig.create()
                .withExpectedSize(15000000)
                .withLoadFactor(0.75f)
                .build());</pre></code>
 When no information is supplied that would determine initial segment count, the default value of 2 is used. In 
 this case, segment size is 4096.
 <p>
 An instance of MapConfig is created when <code>build()</code> is invoked to terminate the chain.<p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>edgeofmagic</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfigBuilder.html" title="interface in org.logicmill.util.concurrent">ConcurrentHashMap.MapConfigBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html#create()">create</a></strong>()</code>
<div class="block">Creates a map configuration builder object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html#getInitSegments()">getInitSegments</a></strong>()</code>
<div class="block">Return the initial number of segments in a map of this configuration.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html#getLoadFactor()">getLoadFactor</a></strong>()</code>
<div class="block">Return the load factor for maps of this configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html#getMaxSegmentCount()">getMaxSegmentCount</a></strong>()</code>
<div class="block">Return the maximum number of segments a map of this configuration can accommodate, 
 given its segment size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html#getSegmentSize()">getSegmentSize</a></strong>()</code>
<div class="block">Return the size of segments in a map of this configuration.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getSegmentSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSegmentSize</h4>
<pre>public&nbsp;int&nbsp;getSegmentSize()</pre>
<div class="block">Return the size of segments in a map of this configuration.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>segment size</dd></dl>
</li>
</ul>
<a name="getInitSegments()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitSegments</h4>
<pre>public&nbsp;int&nbsp;getInitSegments()</pre>
<div class="block">Return the initial number of segments in a map of this configuration.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>inital segment count</dd></dl>
</li>
</ul>
<a name="getMaxSegmentCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSegmentCount</h4>
<pre>public&nbsp;int&nbsp;getMaxSegmentCount()</pre>
<div class="block">Return the maximum number of segments a map of this configuration can accommodate, 
 given its segment size.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>maximum number of segments in this configuration</dd></dl>
</li>
</ul>
<a name="getLoadFactor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoadFactor</h4>
<pre>public&nbsp;float&nbsp;getLoadFactor()</pre>
<div class="block">Return the load factor for maps of this configuration.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>load factor</dd></dl>
</li>
</ul>
<a name="create()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>create</h4>
<pre>public static&nbsp;<a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfigBuilder.html" title="interface in org.logicmill.util.concurrent">ConcurrentHashMap.MapConfigBuilder</a>&nbsp;create()</pre>
<div class="block">Creates a map configuration builder object. An invocation of 
 <code>create()</code> begins an invocation chain to produce a map configuration.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>new MapConfiguration object</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentHashMap.MapConfig.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.LoadFactorSpec.html" title="interface in org.logicmill.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/logicmill/util/concurrent/ConcurrentHashMap.MapConfigBuilder.html" title="interface in org.logicmill.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/logicmill/util/concurrent/ConcurrentHashMap.MapConfig.html" target="_top">Frames</a></li>
<li><a href="ConcurrentHashMap.MapConfig.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
