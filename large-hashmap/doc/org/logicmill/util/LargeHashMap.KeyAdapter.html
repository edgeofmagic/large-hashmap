<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Sun Feb 01 22:50:26 PST 2015 -->
<title>LargeHashMap.KeyAdapter</title>
<meta name="date" content="2015-02-01">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LargeHashMap.KeyAdapter";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LargeHashMap.KeyAdapter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/logicmill/util/LargeHashMap.Entry.html" title="interface in org.logicmill.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/logicmill/util/LongHashable.html" title="interface in org.logicmill.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/logicmill/util/LargeHashMap.KeyAdapter.html" target="_top">Frames</a></li>
<li><a href="LargeHashMap.KeyAdapter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.logicmill.util</div>
<h2 title="Interface LargeHashMap.KeyAdapter" class="title">Interface LargeHashMap.KeyAdapter&lt;K&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>K</code> - The type of key associated with this adapter</dd></dl>
<dl>
<dt>Enclosing interface:</dt>
<dd><a href="../../../org/logicmill/util/LargeHashMap.html" title="interface in org.logicmill.util">LargeHashMap</a>&lt;<a href="../../../org/logicmill/util/LargeHashMap.html" title="type parameter in LargeHashMap">K</a>,<a href="../../../org/logicmill/util/LargeHashMap.html" title="type parameter in LargeHashMap">V</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public static interface <span class="strong">LargeHashMap.KeyAdapter&lt;K&gt;</span></pre>
<div class="block">An adapter object that acts as an intermediary between implementations 
 of <code>LargeHashMap</code> and classes used as keys in those 
 implementations. Key adapters perform two inter-related functions: they
 produce 64-bit hash codes from key objects, and they compare key values
 for equivalence.
 <h4>Long hash codes</h4>
 Lacking a 64-bit cognate of <code>Object.hashCode()</code>, <code>LargeHashMap</code> implementations require a generalized mechanism for 
 obtaining appropriate hash code value from keys. Every instance of a
 <code>LargeHashMap</code> implementation has exactly one associated key
 adapter object. Whenever a hash code is required for an operation on
 on the map, the map implementation invokes <a href="../../../org/logicmill/util/LargeHashMap.KeyAdapter.html#getLongHashCode(java.lang.Object)"><code>getLongHashCode(Object key)</code></a> with the key as its parameter.
 <h4>Key matching</h4>
 A hash map implementation will invoke 
 <code>KeyAdapter.keyMatches(K mapKey, Object key)</code> whenever a 
 comparison is made between a key already stored in the map, and a 
 key provided as a method parameter. Keys stored in hash map entries
 will always be instances of the parameterized key type <code>&lt;K&gt;</code>
 associated with the map. Keys passed as method parameters, when they
 are not subject to being put in the table (that is, key parameters
 in all methods except <code>put</code> and <code>putIfAbsent</code>) are
 passed as type <code>Object</code>. This fact can be exploited to relax type
 constraints for keys used in retrieval, removal, and value replacement
 methods. See the first example key adapter implementation below for
 an illustration of this capability.
 <h4>Key adapter examples</h4>
 The first example illustrates a key adapter for type <code>String</code>:<pre><code>
        public static class StringKeyAdapter extends LargeHashMap.KeyAdapter&lt;String&gt; {
                @Override
                public long getLongHashCode(Object key) {
                        return org.logicmill.util.hash.SpookyHash64.hash((CharSequence)key,  0L);
                        // if the cast fails, ClassCastException will be thrown
                }
                @Override
                public boolean keyMatches(String mappedKey, Object key) {
                        if (key instanceof String) {
                                return mappedKey.equals(key);
                        } else if (key instanceof CharSequence) {
                                return mappedKey.contentEquals((CharSequence)key);
                        } else {
                                return false;
                        }
                }
        }
</code></pre>

 Given this key adapter implementation, map entries can be retrieved, 
 removed, or tested for presence with keys of any type that support
 the <code>CharSequence</code> interface (such as <code>StringBuffer</code>, 
 <code>CharBuffer</code>, or <code>StringBuilder</code>).<p>
 The second example illustrates an adapter for keys of type <code>byte[]</code>:<pre><code>
        public static class ByteKeyAdapter implements LargeHashMap.KeyAdapter&lt;byte[]&gt; {
                @Override
                public long getLongHashCode(Object key) {
                        return org.logicmill.util.hash.SpookyHash64.hash((byte[])key,  0L);                                                     
                }
        
                @Override
                public boolean keyMatches(byte[] mappedKey, Object key) {
                        if (key instanceof byte[]) {
                                byte[] byteKey = (byte[])key;
                                if (mappedKey.length != byteKey.length) return false;
                                for (int i = 0; i < byteKey.length; i++) {
                                        if (mappedKey[i] != byteKey[i]) return false;
                                }
                                return true;
                        } else return false;
                }
        }
</code></pre>
 Because the key adapter assumes responsibility for key matching, it can
 implement value-based comparisons on arrays of primitive types.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>David Curtis</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/logicmill/util/LargeHashMap.KeyAdapter.html#getLongHashCode(java.lang.Object)">getLongHashCode</a></strong>(java.lang.Object&nbsp;key)</code>
<div class="block">Returns a 64-bit hash code for the specified key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/logicmill/util/LargeHashMap.KeyAdapter.html#keyMatches(K,%20java.lang.Object)">keyMatches</a></strong>(<a href="../../../org/logicmill/util/LargeHashMap.KeyAdapter.html" title="type parameter in LargeHashMap.KeyAdapter">K</a>&nbsp;mapKey,
          java.lang.Object&nbsp;key)</code>
<div class="block">Returns true if the specified keys are considered to match for the
 purposes of retrieval from a hash map.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLongHashCode(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLongHashCode</h4>
<pre>long&nbsp;getLongHashCode(java.lang.Object&nbsp;key)</pre>
<div class="block">Returns a 64-bit hash code for the specified key. Implementations
 of this method must provide the following guarantees:
 <ul>
 <li>If <code>keyMatch(K mapKey, Object key)</code> returns <code>true</code> for
 keys <code>mapKey</code> and <code>key</code>, then <code>getLongHashCode(mapMey)</code> and <code>getLongHashCode(key)</code> must
 return the same value.
 <li>If <code>getLongHashCode(Object key)</code> is invoked with the same 
 key parameter multiple times during the execution of a Java 
 application, it must consistently return the same <code>long</code> 
 value, provided no information used in <code>keyMatches</code> 
 comparisons with other keys is modified. This value need not remain 
 consistent from one execution of an application to another.
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key for which the hash code is returned</dd>
<dt><span class="strong">Returns:</span></dt><dd>64-bit hash code for the specified key</dd></dl>
</li>
</ul>
<a name="keyMatches(java.lang.Object,java.lang.Object)">
<!--   -->
</a><a name="keyMatches(K, java.lang.Object)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>keyMatches</h4>
<pre>boolean&nbsp;keyMatches(<a href="../../../org/logicmill/util/LargeHashMap.KeyAdapter.html" title="type parameter in LargeHashMap.KeyAdapter">K</a>&nbsp;mapKey,
                 java.lang.Object&nbsp;key)</pre>
<div class="block">Returns true if the specified keys are considered to match for the
 purposes of retrieval from a hash map.
 <p>
 The definition of key <i>matching</i> is not identical to object 
 <i>equality</i>, as determined by <code>Object.equals(Object)</code>. 
 For example, symmetry is not a required property, since the
 types of the key parameters to 
 <code>keyMatches(K mapKey, Object key)</code> may not allow mutual 
 substitution (that is, <code>key</code> may not be capable of being
 cast to type <code>K</code>). 
 To a great extent, the precise definition of key matching is left
 to the programmer, based on the intended use of keys in the context 
 of a particular application using a hash map. The following 
 recommendations should be considered when implementing key adapters:
 <ul>
 <li><code>keyMatch(k, k)</code> should return <code>true</code> for any 
 non-null key <code>k</code> (that is, is should be reflexive).
 <li>If possible, based on run-time types of the parameters, 
 <code>keyMatch</code> should devolve to <code>equals(Object)</code>, as 
 illustrated in the first example, above.
 <li>Comparisons should be based on compatible information models.
 Also in the first example above, note that a comparison of a 
 <code>String</code> with a <code>CharSequence</code> relies on 
 <code>String.contentEquals</code> to do an appropriate comparison of 
 compatible information, where <code>String.equals</code> would fail even 
 if the underlying character sequences were identical.
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>mapKey</code> - key value stored in the map</dd><dd><code>key</code> - key parameter to be compared with <code>mapKey</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the keys match</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LargeHashMap.KeyAdapter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/logicmill/util/LargeHashMap.Entry.html" title="interface in org.logicmill.util"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/logicmill/util/LongHashable.html" title="interface in org.logicmill.util"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/logicmill/util/LargeHashMap.KeyAdapter.html" target="_top">Frames</a></li>
<li><a href="LargeHashMap.KeyAdapter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
